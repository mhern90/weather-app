(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),i=a.n(o),c=a(6),s=a(7),l=a(9),d=a(8),h=a(10),u=(a(20),a(22),a(24),function(e){var t=e.clickEvents,a=e.icon,n=e.temp,o=e.day;return r.a.createElement("div",{onClick:t,className:"weather-card fl w-20 pa2"},r.a.createElement("div",{className:"pa4 br2 bg-light-gray tc ba b--black-10"},r.a.createElement("div",{className:"pt4"},r.a.createElement("i",{className:function(e){switch(e){case"clear":return"wi wi-day-sunny yellow";case"clouds":return"wi wi-day-cloudy light-silver";case"rain":return"wi wi-day-rain light-blue";default:return""}}(a)+" text-60"})),r.a.createElement("h2",{className:"temp f2 fw4 ma0 pt4"},o),r.a.createElement("h3",{className:"temp f2 fw2 ma0"},n,"\xb0")))}),m=function(e){var t=e.clickEvents,a=e.searchId,n=e.hasError,o=e.inputChangeEvents;return r.a.createElement("div",{className:"tc center"},r.a.createElement("div",null,r.a.createElement("input",{id:a,className:"f6 f5-l bn black-80 bg-white pa3 lh-solid br2-ns br--left-ns",placeholder:"Find weather by city",type:"text",onChange:o}),r.a.createElement("button",{onClick:t,className:"f6 f5-l pv3 tc bn white pointer br2-ns br--right-ns dib white bg-dark-blue"},"Search")),n&&r.a.createElement("div",{"data-error":a,className:"error-message dib pt2 f6 dark-red"}))},f=function(e){var t=e.show,a=e.hideModal,n=e.hourly,o=e.selectedDay,i=t?"modal-wrapper db":"modal-wrapper dn",c=n.find(function(e){return e.day===o});return r.a.createElement("div",{className:i},r.a.createElement("div",{className:"modal-main"},r.a.createElement("div",{className:"pa4 pb5 tc"},r.a.createElement("h2",null,"Hourly forecast for ",c.day),r.a.createElement("ul",{className:"list pl0"},c.hours.map(function(e,t){return r.a.createElement("li",{className:"pb2"},e," - ",c.degrees[t],"\xb0")})),r.a.createElement("button",{className:"f6 link dim br2 ph3 pv2 mb2 dib white bg-purple fr pointer",onClick:a},"Close"))))},p=function(e){return["Sun","Mon","Tue","Wed","Thur","Fri","Sat"][e]},w=function(e){for(var t=e.list,a={},n=t[0].dt_txt,r=n.split(" ")[1],o="",i=t.length-1;i>=0;i--){if(t[i].dt_txt.split(" ")[1]===r){o=t[i].dt_txt;break}}var c=new Date(n).toLocaleString("en-En",{weekday:"long",month:"long",day:"numeric"}),s=new Date(o).toLocaleString("en-En",{weekday:"long",month:"long",day:"numeric"});a.city=e.city.name,a.forecast=[],a.weekStart=c,a.weekEnd=s;var l=[];l.push(e.list[0]);for(i=8;i<e.list.length;i+=8)l.push(e.list[i]);return e.list.slice(0,5),l.forEach(function(e){var t={};t.temp=Math.round(e.main.temp),t.condition=e.weather[0].main.toLowerCase();var n=new Date(e.dt_txt);t.day=p(n.getDay()),a.forecast.push(t)}),a},v=function(){var e=new Date;e=e.toLocaleDateString(),localStorage.setItem("currentDate",e)},g=function(e){var t=e.list,a=[],n="",r={};return t.forEach(function(e,a){var n=new Date(e.dt_txt).getDay();t[a].day=p(n),t[a].time=function(e){var t=0;return e.startsWith("00")?"12:00 am":(t=e.startsWith("0")?parseInt(e.substring(1,e.indexOf(":"))):parseInt(e.substring(0,e.indexOf(":"))))>=12?12===t?t+":00 pm":t-12+":00 pm":t+":00 am"}(e.dt_txt.split(" ")[1])}),t.forEach(function(e){""===n&&(n=e.day,r.day=e.day,r.hours=[],r.degrees=[]),n!==e.day&&(n=e.day,a.push(r),(r={}).day=e.day,r.hours=[],r.degrees=[]),r.hours.push(e.time),r.degrees.push(Math.round(e.main.temp))}),console.log(a),a},y=function(e,t){var a=e.id,n=document.querySelector(".error-message[data-error="+a+"]");e.classList.remove("bn"),e.classList.add("b--dark-red"),n.textContent=t},b=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).retreiveWeatherData=function(t){v();var a=e.state.location;fetch("https://api.openweathermap.org/data/2.5/forecast?q="+a+",us&units=imperial&APPID=d3fb98537841935db142bb370fd3e1c2").then(function(e){return e.json()}).then(function(a){if("404"===a.cod)y(document.getElementById("citySearch"),"Invalid City Name");else{t&&(document.getElementById("citySearch").value=""),localStorage.setItem("rawWeatherData",JSON.stringify(a));var n=w(a),r=g(a);e.setState({hourly:r}),e.setState({weather:n})}}).catch(function(e){console.log(e)})},e.showModal=function(){e.setState({modalShow:!0})},e.hideModal=function(){e.setState({modalShow:!1})},e.state={location:"Chicago",weather:{},hourly:[],modalShow:!1,selectedDay:"Mon"},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("currentDate");if(null!=e){var t=new Date;if((t=t.toLocaleDateString())===e){var a=JSON.parse(localStorage.getItem("rawWeatherData")),n=w(a),r=g(a);this.setState({hourly:r}),this.setState({weather:n})}else this.retreiveWeatherData(!1)}else this.retreiveWeatherData(!1)}},{key:"onCardClick",value:function(e){this.getSelectedDay(e),this.showModal()}},{key:"getSelectedDay",value:function(e){this.setState({selectedDay:e})}},{key:"onSearchChange",value:function(e){!function(e){var t=e.id,a=document.querySelector(".error-message[data-error="+t+"]");e.classList.add("bn"),e.classList.remove("b--dark-red"),a.textContent=""}(e.target)}},{key:"handleSearch",value:function(){var e=this,t=document.getElementById("citySearch").value;this.setState({location:t},function(){e.retreiveWeatherData(!0)})}},{key:"render",value:function(){var e=this,t=this.state.weather;if(t.hasOwnProperty("forecast")){var a=t.forecast;return r.a.createElement("div",{id:"weatherApp",className:"avenir bg-white cf pa4"},r.a.createElement("div",{className:"container-1200 center bg-near-white cf pa4 pb6 ba b--black-10 shadow-4"},r.a.createElement("h1",{className:"normal tc f1 mid-gray pb1 ma0"},"Weekly Weather Forcast"),r.a.createElement("h2",{className:"normal tc f2 black pb3 ma0"},t.city),r.a.createElement(m,{searchId:"citySearch",clickEvents:this.handleSearch.bind(this),hasError:!0,inputChangeEvents:this.onSearchChange.bind(this)}),r.a.createElement("p",{className:"normal tc f3 black pb5"},t.weekStart," - ",t.weekEnd),r.a.createElement("div",{className:"weather-week-container"},a.map(function(t,n){return r.a.createElement(u,{clickEvents:e.onCardClick.bind(e,a[n].day),day:a[n].day,temp:a[n].temp,icon:a[n].condition})}))),r.a.createElement(f,{hideModal:this.hideModal.bind(this),show:this.state.modalShow,hourly:this.state.hourly,selectedDay:this.state.selectedDay}))}return r.a.createElement("h1",null,"Loading...")}}]),t}(n.Component),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(26);i.a.render(r.a.createElement(b,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/weather-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/weather-app","/service-worker.js");E?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):k(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):k(e)})}}()}},[[11,2,1]]]);
//# sourceMappingURL=main.19eb0c22.chunk.js.map